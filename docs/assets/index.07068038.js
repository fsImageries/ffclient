var v=Object.defineProperty;var F=(n,e,t)=>e in n?v(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var a=(n,e,t)=>(F(n,typeof e!="symbol"?e+"":e,t),t);import{r as d,s as p,j as m,v as h,R as L,a as w}from"./vendor.ec2b745b.js";const O=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};O();class j{constructor(){a(this,"loaded");a(this,"setLoaded");a(this,"files");a(this,"setFiles");a(this,"outputs");a(this,"setOutputs");[this.loaded,this.setLoaded]=d.exports.useState(!1),[this.files,this.setFiles]=d.exports.useState(),[this.outputs,this.setOutputs]=d.exports.useState()}}const u=p.createFFmpeg({log:!0});class g{constructor(){}load(e){(async()=>{await u.load(),e(!0)})()}static async files(e){if(!e)return;const t=[];for(let l=0;l<e.length;l++){const s=e[l];console.log("gelaufen"),u.FS("writeFile",s.name,await p.fetchFile(s));const r=s.name.split(".").pop(),f=`output_${s.name.replace(`.${r}`,"")}.avi`;await u.run("-i",s.name,f);const x=u.FS("readFile",s.name),b=URL.createObjectURL(new Blob([x.buffer]));t[l]={name:f,url:b}}return t}}const o=m.exports.jsx,i=m.exports.jsxs,y=({type:n,base:e,text:t,multiple:l,onChange:s,onKeyPress:r})=>i("div",{className:`${e}Field field`,children:[o("label",{id:`${e}Label`,htmlFor:`${e}Input`,className:"fieldLabel",children:t}),o("input",{type:n,id:`${e}Input`,multiple:l,className:"fieldInput",onChange:s,onKeyPress:r})]});function N(){const n=new j,e=new g;return d.exports.useEffect(()=>{e.load(n.setLoaded)},[]),n.loaded?i("div",{className:"App",children:[o(y,{text:"Upload a file to process:",type:"file",base:"upload",multiple:!0,onChange:t=>{t.target.files&&n.setFiles(t.target.files)}}),o(y,{text:"Enter ffmpeg command:",type:"text",base:"cmd",onKeyPress:async t=>{if(t.key==="Enter"&&n.files){const l=await g.files(n.files);l&&n.setOutputs(l)}}}),i("table",{className:"contentTable",children:[o("thead",{children:i("tr",{children:[o("th",{children:"Uploaded"}),o("th",{children:"Converted"})]})}),o("tbody",{children:i("tr",{children:[o("td",{children:n.files&&Object.values(n.files).map(t=>o("div",{children:t.name},h()))}),o("td",{className:"outsTd",children:n.outputs&&n.outputs.map(t=>o("a",{download:t.name,href:t.url,children:t.name},h()))})]})})]})]}):o("p",{children:"Loading..."})}L.render(o(w.StrictMode,{children:o(N,{})}),document.getElementById("root"));
